<!-- Professional Vision Guard Login Page -->
<!DOCTYPE html>
<html lang="en">
<head>
    <title>Vision Guard - Login</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="vision3.css">
</head>
<body>
    <header class="main-header">
        <div class="logo-text">Vision Guard</div>
        <nav class="main-nav">
            <a href="vision.html">Home</a>
            <a href="visionsignup.html">Sign Up</a>
            <a href="visionlogin.html" class="active">Login</a>
            <a href="dashboard.html">Dashboard</a>
        </nav>
    </header>
    
    <script>
    function login() {
        const email = document.getElementById("email").value;
        const password = document.getElementById("password").value;
        
        fetch("http://127.0.0.1:5000/api/login", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({
                email: email,
                password: password
            })
        })
        .then(response => response.json().then(data => ({
            status: response.status,
            body: data
        })))
        .then(result => {
            // âœ… ONLY this condition allows redirect
            if (result.status === 200 && result.body.success === true) {
                alert("Login successful");
                window.location.href = "HOME.html";
            } else {
                alert("Invalid email or password");
            }
        })
        .catch(error => {
            alert("Server error");
            console.error(error);
        });
    }
    </script>

    <main>
        <div class="login-form">
            <h2>Login to Your Account</h2>
            <form>
                <label for="phone">Phone Number</label>
                <input type="tel" id="phone" placeholder="Phone Number" required>
                <label for="password">Password</label>
                <input type="password" id="password" placeholder="Password" required>
                <button type="button" onclick="window.location.href='visionT&C.html'">Login</button>
            </form>
            <a href="visionsignup.html" class="back-link">Don't have an account? Sign Up</a>
        </div>
    </main>
    <footer class="main-footer">
        <p>&copy; 2025 Vision Guard. All rights reserved.</p>
    </footer>
</body>
</html>

